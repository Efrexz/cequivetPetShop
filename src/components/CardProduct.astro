---
import WhatsAppIcon from "@assets/icons/whatsapp.svg";
import Logo from "@assets/images/logo.webp";

const { product } = Astro.props;

const whatsappMessage = `Hola, me interesa el producto ${product.name} (${product.price}). ¿Podrías darme más información?`;
const whatsappLink = `https://wa.me/+51970691590?text=${encodeURIComponent(whatsappMessage)}`;
---

<div
  class="w-full h-full flex flex-col bg-white rounded-xl shadow-lg border border-gray-100 transform transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-2xl hover:border-[#00BD9D]"
>
  <div class="overflow-hidden rounded-t-xl">
    <img
      src={product.image ?? Logo.src}
      alt={`Imagen de ${product.name}`}
      class="w-full h-40 object-cover rounded-t-xl transform transition-transform duration-300 ease-in-out hover:scale-110"
    />
  </div>
  <div class="p-4 flex flex-col flex-grow text-center">
    <div class="flex-none h-14 overflow-hidden mb-1">
      <h4 class="font-bold text-lg text-[#007872] leading-tight line-clamp-2">
        {product.name}
      </h4>
    </div>

    <div class="flex-none h-12 overflow-hidden mb-3">
      <p class="text-sm text-gray-600 line-clamp-2">
        {product.description}
      </p>
    </div>

    <div
      class="mt-auto pt-3 border-t border-gray-100 flex flex-col sm:flex-row items-center justify-between gap-3"
    >
      <span
        class="text-2xl font-extrabold text-orange-500 order-1 sm:order-1 w-full sm:w-auto"
      >
        {product.price}
      </span>
      <a
        href={whatsappLink}
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center justify-center gap-2 px-4 py-2 rounded-full bg-[#25D366] text-white font-semibold text-sm shadow-lg shadow-green-600/30 hover:bg-[#1DA851] transition transform hover:scale-105 w-full sm:w-auto order-2 sm:order-2 button-hover-effect"
        aria-label={`Pedir ${product.name} por WhatsApp`}
      >
        <WhatsAppIcon class="w-5 h-5" />
        Pedir
      </a>
    </div>
  </div>
</div>
